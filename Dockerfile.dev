# Development Dockerfile for local testing
FROM node:18-alpine

# Set working directory
WORKDIR /app

# Install pnpm
RUN npm install -g pnpm

# Copy package.json and pnpm-lock.yaml first to leverage Docker caching
COPY package.json pnpm-lock.yaml* ./

# Install dependencies using pnpm
RUN pnpm install --frozen-lockfile

# Approve build scripts for trusted packages
RUN pnpm approve-builds @tailwindcss/oxide sharp unrs-resolver

# Copy the rest of the application code
COPY . .

# Set development environment variables
ENV NODE_ENV=development
ENV NEXT_PUBLIC_APP_ENV=development
ENV NEXT_PUBLIC_APP_URL=http://localhost:3000
ENV NEXT_PUBLIC_ANALYTICS_ENABLED=false
ENV NEXT_PUBLIC_ENABLE_DEBUG_MODE=true
ENV NEXT_PUBLIC_ENABLE_CONSOLE_LOGS=true

# Expose port
EXPOSE 3000

# Start development server
CMD ["pnpm", "dev"] 